"use strict";window.tz=function(...e){ai.testNum=ai.testNum?ai.testNum+1:1;ai.testNum;let r=!1,t=[],o={},n=0,l=[],c=function(e){t.push(e)},i=function(e){c(function(r){return r-e})},f=function(e,r){e=Math.floor(-e),o[r]=n,n=r+1,c(e)},s=function(e,r){c(e)},u=function(e,r){c(function(t){for(let t=0;t<l.length;t++)l[t][e]=r;return t})},a=function(e){c(e)},y=function(e,r,t){return"number"==typeof e?e>=0?(i(e),0):(f(e,r),0):Array.isArray(e)?0===e.length?0:(s(e),0):e instanceof cc.Node?(s([e]),0):"string"==typeof e?(u(e,t[r+1]),1):"function"==typeof e?(a(e),0):void 0};for(let r=0;r<e.length;r++){r+=y(e[r],r,e)}l=[cc.director.getScene().getChildren()[0]];let p=0,g=0,h=null,m=function(e,r){let t=!1,o=null,n=[],c=function(e,r,t,o,l,c){let i=function(t){let o=[];for(let e=0;e<l.length;e++)o.push(c[e]*t+(1-t)*l[e]);e[r](...o)},f=t+o,s=function(e){return e<o?e-f:e>=f?(i(1),e-f):(i((e-o)/t),e-f)};return n.push(s),s},i=function(e,r,t,o,l,c){let i=function(t){e[r]=c*t+(1-t)*l},f=t+o,s=function(e){return e<=o?e-f:e>=f?(i(1),e-f):(i((e-o)/t),e-f)};return n.push(s),s},f=function(e,r,t,o,l){let c=function(r){let t=[];for(let e=0;e<o.length;e++)t.push(l[e]*r+(1-r)*o[e]);e.color=cc.color(...t)},i=r+t,f=function(e){return e<=t?e-i:e>=i?(c(1),e-i):(c((e-t)/r),e-i)};return n.push(f),f},s=function(){if(!o)return;let{nodeArr:e,funArr:r}=o;for(let t=0;t<e.length;t++){for(let e=0;e<r.length;e++){let n=r[e](t);if("number"==typeof n)o.delayTime=n;else if(n instanceof cc.Vec2){if(!o.pos)return cc.error("\u539f\u6765\u6ca1\u6709pos\u7684\u8bdd\uff0c\u540e\u9762\u51fd\u6570\u4e5f\u4e0d\u80fd\u8fd4\u56devec2");n.isBy=o.pos.isBy,o.pos=n}else if(n instanceof cc.Color){if(!o.color)return cc.error("\u539f\u6765\u6ca1\u6709color\u7684\u8bdd\uff0c\u540e\u9762\u51fd\u6570\u4e5f\u4e0d\u80fd\u8fd4\u56decolor");n.isBy=o.color.isBy,o.color=n}else if(Array.isArray(n)&&1===n.length){if(!o.rotation)return cc.error("\u539f\u6765\u6ca1\u6709rotation\u7684\u8bdd\uff0c\u540e\u9762\u51fd\u6570\u4e5f\u4e0d\u80fd\u8fd4\u56de[num]");n.isBy=o.rotation.isBy,o.rotation=n}else if(Array.isArray(n)&&2===n.length){if(!o.scale)return cc.error("\u539f\u6765\u6ca1\u6709scale\u7684\u8bdd\uff0c\u540e\u9762\u51fd\u6570\u4e5f\u4e0d\u80fd\u8fd4\u56de[num1, num2]");n.isBy=o.scale.isBy,o.scale=n}}let n=e[t];if(o.pos){let e=[n.x,n.y],r=cc.v2(o.pos);!0===r.x&&(r.x=n.x),!0===r.y&&(r.y=n.y),o.pos.isBy&&r.addSelf(n);let t=[r.x,r.y];c(n,"setPosition",o.time,o.delayTime,e,t),o.pos.addSelf(o.offsetPos)}if(o.color){let e=[n.color.r,n.color.g,n.color.b],r=cc.color(o.color);!0===r.r&&(r.r=n.color.r),!0===r.g&&(r.g=n.color.g),!0===r.b&&(r.b=n.color.b),o.color.isBy&&(r.r+=n.color.r,r.g+=n.color.g,r.b+=n.color.b);let t=[r.r,r.g,r.b];f(n,o.time,o.delayTime,e,t),o.color.r+=o.offsetColor.r,o.color.g+=o.offsetColor.g,o.color.b+=o.offsetColor.b}if(o.scale){let e=[n.scaleX,n.scaleY],r=[...o.scale];!0===r[0]&&(r[0]=n.scaleX),!0===r[1]&&(r[1]=n.scaleY),o.scale.isBy&&(r[0]*=n.scaleX,r[1]*=n.scaleY);let t=[...r];c(n,"setScale",o.time,o.delayTime,e,t),o.scale[0]+=o.offsetScale[0],o.scale[1]+=o.offsetScale[1]}if(o.rotation){let e=[n.rotation],r=[...o.rotation];!0===r[0]&&(r[0]=n.rotation),o.rotation.isBy&&(r[0]+=n.rotation);let t=[...r];c(n,"setRotation",o.time,o.delayTime,e,t),o.rotation[0]+=o.offsetRotation[0]}for(let e=0;e<o.valueArr.length;e++){let[r,t,l]=o.valueArr[e],c=n[t];if("number"!=typeof c)return cc.error("\u8fd9\u4e2a\u5c5e\u6027\u5f00\u59cb\u7684\u65f6\u5019\u5fc5\u987b\u8981\u662f\u6570\u503c\uff0c\u4e0d\u7136\u6ca1\u6cd5\u53d8\u5316",c);let f=l;r&&(f+=c),i(n,t,o.time,o.delayTime,c,f)}o.delayTime+=o.offsetTime}};for(let r=0;r<e.length;r++){let n=e[r];if(!0===n)t=!0;else if(!1===n)t=!1;else if("number"==typeof n)if(s(),o={time:n,delayTime:0,nodeArr:l,funArr:[],valueArr:[]},"number"==typeof e[r+1]){if(o.offsetTime=e[r+1],"number"==typeof e[++r+1])return cc.error("\u4e0d\u80fd\u8fde\u7eed\u4e09\u4e2a\u90fd\u662f\u6570\u5b57",e[r+1])}else o.offsetTime=0;else if(n instanceof cc.Vec2){if(o.pos)return cc.error("\u8fd9\u91cc\u5df2\u7ecf\u6709\u4e86\u4f4d\u7f6e\uff0c\u4e0d\u80fd\u518d\u6dfb\u52a0\u4e86");if(isNaN(n.x))return!1;n.isBy=t,o.pos=n,e[r+1]instanceof cc.Vec2?(o.offsetPos=e[r+1],r++):o.offsetPos=cc.v2(0,0)}else if(n instanceof cc.Color){if(o.color)return cc.error("\u8fd9\u91cc\u5df2\u7ecf\u6709\u989c\u8272\u4e86\uff0c\u4e0d\u80fd\u518d\u6dfb\u52a0\u4e86");n.isBy=t,o.color=n,e[r+1]instanceof cc.Color?(o.offsetColor=e[r+1],r++):o.offsetColor=cc.color(0,0,0)}else if(n instanceof cc.Node)l=[n];else if(Array.isArray(n)){if(n[0]instanceof cc.Node)l=n;else if(1===n.length){if("number"==typeof o.rotation)return cc.error("\u8fd9\u4e2a\u5df2\u7ecf\u6709\u65cb\u8f6c\u4e86\uff0c\u4e0d\u80fd\u518d\u6dfb\u52a0\u4e86");n.isBy=t,o.rotation=n,Array.isArray(e[r+1])&&1===e[r+1].length?(o.offsetRotation=e[r+1],r++):o.offsetRotation=[0]}else if(2===n.length){if(o.scale)return cc.error("\u8fd9\u4e2a\u5df2\u7ecf\u6709\u7f29\u653e\u4e86\uff0c\u4e0d\u80fd\u518d\u6dfb\u52a0\u4e86");n.isBy=t,o.scale=n,Array.isArray(e[r+1])&&2===e[r+1].length?(o.offsetScale=e[r+1],r++):o.offsetScale=[0,0]}}else if("string"==typeof n){let l=e[r+1];if("number"!=typeof l)return cc.error("\u8fd9\u4e2a\u5c5e\u6027\u53ea\u80fd\u6539\u53d8\u6570\u503c\uff0c\u4e0d\u63a5\u53d7\u5176\u4ed6\u7c7b\u578b",l);r++,o.valueArr.push([t,n,l])}else{if("function"!=typeof n)return cc.error("\u8fd9\u4e2a\u53c2\u6570\u65e0\u6cd5\u8bc6\u522b\u7528\u6cd5",n);o.funArr.push(n)}}if("number"==typeof e[e.length-1]){if("number"==typeof e[e.length-2])return cc.error("\u4e0d\u80fd\u6700\u540e\u4e24\u4e2a\u90fd\u662f\u6570\u5b57");if("string"!=typeof e[e.length-2]){let r=e[e.length-1],t=function(e){return e-r};n.push(t)}else s()}else s();let u=[];for(let e=n.length-1;e>=0;e--)u.push(n[e]);n=u;let a=function(e){let r=1e7;for(let t=n.length-1;t>=0;t--){let o=n[t](e);r=o<r?o:r,o>=0&&([n[t],n[n.length-1]]=[n[n.length-1],n[t]],n.pop())}return r},y=a(r);return y<0?(g=r,a):(p++,h(y))},d=null,N=null,A=!0;h=function(e){let n=t[p];if("number"==typeof n)return n<=0?(p++,h(e)):(t[p]--,p=o[p],h(e));if(Array.isArray(n)){let r=!0;for(let e=0;e<n.length;e++)n[e]instanceof cc.Node||(r=!1);return r?(l=n,p++,h(e)):m(n,e)}if("function"==typeof n){let r=e;if(e=n(e),Array.isArray(e)){var c=e;return c.push(function(e){p++,b=h(0),N(!0),N(-e)}),N(!1),tz(...c)(-r),null}return"number"!=typeof e?(p++,g=e=r,h(e)):e>=0?(p++,h(e)):(g=r,n)}if(void 0===n)return r=!0,null;cc.error("\u8fd9\u4e2a\u7c7b\u578b\u4e0d\u77e5\u9053\u600e\u4e48\u5904\u7406",n)};let b=null,B=null,v=null;return N=function(e){if(!1===d)return cc.error("\u8fd9\u4e2a\u5df2\u7ecf\u88ab\u5220\u6389\u4e86\uff0c\u4e0d\u80fd\u518d\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c");if(Array.isArray(e)){for(let r=0;r<e.length;r++){r+=y(e[r],r,e)}r&&d?(r=!1,b=h(0),v=cc.callFunc(()=>{d=dyl.update(B)}),cc.director.getScene().getChildren()[0].runAction(v)):r&&(r=!1,b=h(0))}else null===e||void 0===e?(d&&d(),d=!1):isNaN(e)?(cc.log("NNNNNNNNNNNNNNNNNNNN"),B(1e6)):"number"==typeof e?e<=0&&(g-=e):"boolean"==typeof e&&(d?d(e):A=e)},b=h(0),B=function(e){if(!b)return!1;let r=b(g+=e);return"number"!=typeof r?(p++,b=h(g)):r>=0&&(p++,g=r,b=h(r)),!0},v=cc.callFunc(()=>{!1!==d&&(d=dyl.update(B))(A)}),cc.director.getScene().getChildren()[0].runAction(v),N};